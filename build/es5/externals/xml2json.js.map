{"version":3,"sources":["../../../externals/xml2json.js"],"names":["X2JS","config","VERSION","initConfigDefaults","initRequiredPolyfills","escapeMode","undefined","attributePrefix","arrayAccessForm","emptyNodeForm","enableToStringFunc","arrayAccessFormPaths","skipEmptyTextNodesForObj","stripWhitespaces","datetimeAccessFormPaths","useDoubleQuotes","xmlElementsFilter","jsonPropertiesFilter","keepCData","ignoreRoot","DOMNodeTypes","ELEMENT_NODE","TEXT_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","getNodeLocalName","node","nodeLocalName","localName","baseName","nodeName","getNodePrefix","prefix","escapeXmlChars","str","replace","unescapeXmlChars","checkInStdFiltersArrayForm","stdFiltersArrayForm","obj","name","path","idx","length","filterPath","RegExp","test","toArrayAccessForm","childName","Array","fromXmlDateTime","prop","bits","split","d","Date","secondBits","setHours","setMilliseconds","offsetMinutes","Number","sign","setMinutes","getMinutes","getTimezoneOffset","indexOf","UTC","getFullYear","getMonth","getDate","getHours","getSeconds","getMilliseconds","checkFromXmlDateTimePaths","value","fullPath","checkXmlElementsFilter","childType","childPath","parseDOMChildren","nodeType","result","Object","nodeChildren","childNodes","cidx","child","__cnt","children","c","o","push","__children","aidx","attributes","attr","value2","m","ml","matchers","matchobj","converter","nodePrefix","__prefix","__text","join","trim","__cdata","toString","nodeValue","startTag","jsonObj","element","attrList","closed","resultStr","attrName","attrVal","substr","endTag","elementName","endsWith","suffix","jsonXmlSpecialElem","jsonObjField","Function","jsonXmlElemCount","elementsCnt","it","checkJsonObjPropertiesFilter","propertyName","jsonObjPath","parseJSONAttributes","ait","parseJSONTextAttrs","jsonTxtObj","parseJSONTextObject","getJsonPropertyPath","jsonPropName","parseJSONArray","jsonArrRoot","jsonArrObj","arIdx","parseJSONObject","subObj","toISOString","subObjElementsCnt","parseXmlString","xmlDocStr","isIEParser","window","ActiveXObject","xmlDoc","DOMParser","parser","parsererrorNS","parseFromString","getElementsByTagNameNS","err","async","loadXML","asArray","toXmlDateTime","dt","asDateTime","xml2json","xml_str2json","json2xml_str","json2xml","getVersion"],"mappings":"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","file":"xml2json.js","sourcesContent":["/*\n Copyright 2011-2013 Abdulla Abdurakhmanov\n Original sources are available at https://code.google.com/p/x2js/\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/*\n  Further modified for dashjs to:\n  - keep track of children nodes in order in attribute __children.\n  - add type conversion matchers\n  - re-add ignoreRoot\n  - allow zero-length attributePrefix\n  - don't add white-space text nodes\n  - remove explicit RequireJS support\n*/\n\nfunction X2JS(config) {\n    'use strict';\n\n    var VERSION = \"1.2.0\";\n\n    config = config || {};\n    initConfigDefaults();\n    initRequiredPolyfills();\n\n    function initConfigDefaults() {\n        if(config.escapeMode === undefined) {\n            config.escapeMode = true;\n        }\n\n        if (config.attributePrefix === undefined) {\n            config.attributePrefix = \"_\";\n        }\n\n        config.arrayAccessForm = config.arrayAccessForm || \"none\";\n        config.emptyNodeForm = config.emptyNodeForm || \"text\";\n\n        if(config.enableToStringFunc === undefined) {\n            config.enableToStringFunc = true;\n        }\n        config.arrayAccessFormPaths = config.arrayAccessFormPaths || [];\n        if(config.skipEmptyTextNodesForObj === undefined) {\n            config.skipEmptyTextNodesForObj = true;\n        }\n        if(config.stripWhitespaces === undefined) {\n            config.stripWhitespaces = true;\n        }\n        config.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];\n\n        if(config.useDoubleQuotes === undefined) {\n            config.useDoubleQuotes = false;\n        }\n\n        config.xmlElementsFilter = config.xmlElementsFilter || [];\n        config.jsonPropertiesFilter = config.jsonPropertiesFilter || [];\n\n        if(config.keepCData === undefined) {\n            config.keepCData = false;\n        }\n\n        if (config.ignoreRoot === undefined) {\n            config.ignoreRoot = false;\n        }\n    }\n\n    var DOMNodeTypes = {\n        ELEMENT_NODE \t   : 1,\n        TEXT_NODE    \t   : 3,\n        CDATA_SECTION_NODE : 4,\n        COMMENT_NODE\t   : 8,\n        DOCUMENT_NODE \t   : 9\n    };\n\n    function initRequiredPolyfills() {\n    }\n\n    function getNodeLocalName( node ) {\n        var nodeLocalName = node.localName;\n        if(nodeLocalName == null) // Yeah, this is IE!!\n            nodeLocalName = node.baseName;\n        if(nodeLocalName == null || nodeLocalName==\"\") // ==\"\" is IE too\n            nodeLocalName = node.nodeName;\n        return nodeLocalName;\n    }\n\n    function getNodePrefix(node) {\n        return node.prefix;\n    }\n\n    function escapeXmlChars(str) {\n        if(typeof(str) == \"string\")\n            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\n        else\n            return str;\n    }\n\n    function unescapeXmlChars(str) {\n        return str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&amp;/g, '&');\n    }\n\n    function checkInStdFiltersArrayForm(stdFiltersArrayForm, obj, name, path) {\n        var idx = 0;\n        for(; idx < stdFiltersArrayForm.length; idx++) {\n            var filterPath = stdFiltersArrayForm[idx];\n            if( typeof filterPath === \"string\" ) {\n                if(filterPath == path)\n                    break;\n            }\n            else\n            if( filterPath instanceof RegExp) {\n                if(filterPath.test(path))\n                    break;\n            }\n            else\n            if( typeof filterPath === \"function\") {\n                if(filterPath(obj, name, path))\n                    break;\n            }\n        }\n        return idx!=stdFiltersArrayForm.length;\n    }\n\n    function toArrayAccessForm(obj, childName, path) {\n        switch(config.arrayAccessForm) {\n            case \"property\":\n                if(!(obj[childName] instanceof Array))\n                    obj[childName+\"_asArray\"] = [obj[childName]];\n                else\n                    obj[childName+\"_asArray\"] = obj[childName];\n                break;\n            /*case \"none\":\n                break;*/\n        }\n\n        if(!(obj[childName] instanceof Array) && config.arrayAccessFormPaths.length > 0) {\n            if(checkInStdFiltersArrayForm(config.arrayAccessFormPaths, obj, childName, path)) {\n                obj[childName] = [obj[childName]];\n            }\n        }\n    }\n\n    function fromXmlDateTime(prop) {\n        // Implementation based up on http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object\n        // Improved to support full spec and optional parts\n        var bits = prop.split(/[-T:+Z]/g);\n\n        var d = new Date(bits[0], bits[1]-1, bits[2]);\n        var secondBits = bits[5].split(\"\\.\");\n        d.setHours(bits[3], bits[4], secondBits[0]);\n        if(secondBits.length>1)\n            d.setMilliseconds(secondBits[1]);\n\n        // Get supplied time zone offset in minutes\n        if(bits[6] && bits[7]) {\n            var offsetMinutes = bits[6] * 60 + Number(bits[7]);\n            var sign = /\\d\\d-\\d\\d:\\d\\d$/.test(prop)? '-' : '+';\n\n            // Apply the sign\n            offsetMinutes = 0 + (sign == '-'? -1 * offsetMinutes : offsetMinutes);\n\n            // Apply offset and local timezone\n            d.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset())\n        }\n        else\n            if(prop.indexOf(\"Z\", prop.length - 1) !== -1) {\n                d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));\n            }\n\n        // d is now a local time equivalent to the supplied time\n        return d;\n    }\n\n    function checkFromXmlDateTimePaths(value, childName, fullPath) {\n        if(config.datetimeAccessFormPaths.length > 0) {\n            var path = fullPath.split(\"\\.#\")[0];\n            if(checkInStdFiltersArrayForm(config.datetimeAccessFormPaths, value, childName, path)) {\n                return fromXmlDateTime(value);\n            }\n            else\n                return value;\n        }\n        else\n            return value;\n    }\n\n    function checkXmlElementsFilter(obj, childType, childName, childPath) {\n        if( childType == DOMNodeTypes.ELEMENT_NODE && config.xmlElementsFilter.length > 0) {\n            return checkInStdFiltersArrayForm(config.xmlElementsFilter, obj, childName, childPath);\n        }\n        else\n            return true;\n    }\n\n    function parseDOMChildren( node, path ) {\n        if(node.nodeType == DOMNodeTypes.DOCUMENT_NODE) {\n            var result = new Object;\n            var nodeChildren = node.childNodes;\n            // Alternative for firstElementChild which is not supported in some environments\n            for(var cidx=0; cidx <nodeChildren.length; cidx++) {\n                var child = nodeChildren[cidx];\n                if(child.nodeType == DOMNodeTypes.ELEMENT_NODE) {\n                    if (config.ignoreRoot) {\n                        result = parseDOMChildren(child);\n                    } else {\n                        result = {};\n                        var childName = getNodeLocalName(child);\n                        result[childName] = parseDOMChildren(child);\n                    }\n                }\n            }\n            return result;\n        }\n        else\n        if(node.nodeType == DOMNodeTypes.ELEMENT_NODE) {\n            var result = new Object;\n            result.__cnt=0;\n\n            var children = [];\n            var nodeChildren = node.childNodes;\n\n            // Children nodes\n            for(var cidx=0; cidx <nodeChildren.length; cidx++) {\n                var child = nodeChildren[cidx];\n                var childName = getNodeLocalName(child);\n\n                if(child.nodeType!= DOMNodeTypes.COMMENT_NODE) {\n                    var childPath = path+\".\"+childName;\n                    if (checkXmlElementsFilter(result,child.nodeType,childName,childPath)) {\n                        result.__cnt++;\n                        if(result[childName] == null) {\n                            var c = parseDOMChildren(child, childPath);\n                            if (childName != \"#text\" || /[^\\s]/.test(c)) {\n                                var o = {};\n                                o[childName] = c;\n                                children.push(o);\n                            }\n                            result[childName] = c;\n                            toArrayAccessForm(result, childName, childPath);\n                        }\n                        else {\n                            if(result[childName] != null) {\n                                if( !(result[childName] instanceof Array)) {\n                                    result[childName] = [result[childName]];\n                                    toArrayAccessForm(result, childName, childPath);\n                                }\n                            }\n\n                            var c = parseDOMChildren(child, childPath);\n                            if (childName != \"#text\" || /[^\\s]/.test(c)) { // Don't add white-space text nodes\n                                var o = {};\n                                o[childName] = c;\n                                children.push( o );\n                            }\n                            (result[childName])[result[childName].length] = c;\n                        }\n                    }\n                }\n            }\n\n            result.__children = children;\n\n            // Attributes\n            var nodeLocalName = getNodeLocalName(node)\n            for(var aidx=0; aidx <node.attributes.length; aidx++) {\n                var attr = node.attributes[aidx];\n                result.__cnt++;\n\n                var value2 = attr.value;\n                for(var m=0, ml=config.matchers.length; m < ml; m++) {\n                    var matchobj = config.matchers[m];\n                    if (matchobj.test(attr, nodeLocalName))\n                        value2 = matchobj.converter(attr.value);\n                }\n\n                result[config.attributePrefix+attr.name]=value2;\n            }\n\n            // Node namespace prefix\n            var nodePrefix = getNodePrefix(node);\n            if(nodePrefix!=null && nodePrefix!=\"\") {\n                result.__cnt++;\n                result.__prefix=nodePrefix;\n            }\n\n            if(result[\"#text\"]!=null) {\n                result.__text = result[\"#text\"];\n                if(result.__text instanceof Array) {\n                    result.__text = result.__text.join(\"\\n\");\n                }\n                //if(config.escapeMode)\n                //\tresult.__text = unescapeXmlChars(result.__text);\n                if(config.stripWhitespaces)\n                    result.__text = result.__text.trim();\n                delete result[\"#text\"];\n                if(config.arrayAccessForm==\"property\")\n                    delete result[\"#text_asArray\"];\n                result.__text = checkFromXmlDateTimePaths(result.__text, childName, path+\".\"+childName);\n            }\n            if(result[\"#cdata-section\"]!=null) {\n                result.__cdata = result[\"#cdata-section\"];\n                delete result[\"#cdata-section\"];\n                if(config.arrayAccessForm==\"property\")\n                    delete result[\"#cdata-section_asArray\"];\n            }\n\n            if( result.__cnt == 0 && config.emptyNodeForm==\"text\" ) {\n                result = '';\n            }\n            else\n            if( result.__cnt == 1 && result.__text!=null  ) {\n                result = result.__text;\n            }\n            else\n            if( result.__cnt == 1 && result.__cdata!=null && !config.keepCData  ) {\n                result = result.__cdata;\n            }\n            else\n            if ( result.__cnt > 1 && result.__text!=null && config.skipEmptyTextNodesForObj) {\n                if( (config.stripWhitespaces && result.__text==\"\") || (result.__text.trim()==\"\")) {\n                    delete result.__text;\n                }\n            }\n            delete result.__cnt;\n\n            if( config.enableToStringFunc && (result.__text!=null || result.__cdata!=null )) {\n                result.toString = function() {\n                    return (this.__text!=null? this.__text:'')+( this.__cdata!=null ? this.__cdata:'');\n                };\n            }\n\n            return result;\n        }\n        else\n        if(node.nodeType == DOMNodeTypes.TEXT_NODE || node.nodeType == DOMNodeTypes.CDATA_SECTION_NODE) {\n            return node.nodeValue;\n        }\n    }\n\n    function startTag(jsonObj, element, attrList, closed) {\n        var resultStr = \"<\"+ ( (jsonObj!=null && jsonObj.__prefix!=null)? (jsonObj.__prefix+\":\"):\"\") + element;\n        if(attrList!=null) {\n            for(var aidx = 0; aidx < attrList.length; aidx++) {\n                var attrName = attrList[aidx];\n                var attrVal = jsonObj[attrName];\n                if(config.escapeMode)\n                    attrVal=escapeXmlChars(attrVal);\n                resultStr+=\" \"+attrName.substr(config.attributePrefix.length)+\"=\";\n                if(config.useDoubleQuotes)\n                    resultStr+='\"'+attrVal+'\"';\n                else\n                    resultStr+=\"'\"+attrVal+\"'\";\n            }\n        }\n        if(!closed)\n            resultStr+=\">\";\n        else\n            resultStr+=\"/>\";\n        return resultStr;\n    }\n\n    function endTag(jsonObj,elementName) {\n        return \"</\"+ (jsonObj.__prefix!=null? (jsonObj.__prefix+\":\"):\"\")+elementName+\">\";\n    }\n\n    function endsWith(str, suffix) {\n        return str.indexOf(suffix, str.length - suffix.length) !== -1;\n    }\n\n    function jsonXmlSpecialElem ( jsonObj, jsonObjField ) {\n        if((config.arrayAccessForm==\"property\" && endsWith(jsonObjField.toString(),(\"_asArray\")))\n                || jsonObjField.toString().indexOf(config.attributePrefix)==0\n                || jsonObjField.toString().indexOf(\"__\")==0\n                || (jsonObj[jsonObjField] instanceof Function) )\n            return true;\n        else\n            return false;\n    }\n\n    function jsonXmlElemCount ( jsonObj ) {\n        var elementsCnt = 0;\n        if(jsonObj instanceof Object ) {\n            for( var it in jsonObj  ) {\n                if(jsonXmlSpecialElem ( jsonObj, it) )\n                    continue;\n                elementsCnt++;\n            }\n        }\n        return elementsCnt;\n    }\n\n    function checkJsonObjPropertiesFilter(jsonObj, propertyName, jsonObjPath) {\n        return config.jsonPropertiesFilter.length == 0\n            || jsonObjPath==\"\"\n            || checkInStdFiltersArrayForm(config.jsonPropertiesFilter, jsonObj, propertyName, jsonObjPath);\n    }\n\n    function parseJSONAttributes ( jsonObj ) {\n        var attrList = [];\n        if(jsonObj instanceof Object ) {\n            for( var ait in jsonObj  ) {\n                if(ait.toString().indexOf(\"__\")== -1 && ait.toString().indexOf(config.attributePrefix)==0) {\n                    attrList.push(ait);\n                }\n            }\n        }\n        return attrList;\n    }\n\n    function parseJSONTextAttrs ( jsonTxtObj ) {\n        var result =\"\";\n\n        if(jsonTxtObj.__cdata!=null) {\n            result+=\"<![CDATA[\"+jsonTxtObj.__cdata+\"]]>\";\n        }\n\n        if(jsonTxtObj.__text!=null) {\n            if(config.escapeMode)\n                result+=escapeXmlChars(jsonTxtObj.__text);\n            else\n                result+=jsonTxtObj.__text;\n        }\n        return result;\n    }\n\n    function parseJSONTextObject ( jsonTxtObj ) {\n        var result =\"\";\n\n        if( jsonTxtObj instanceof Object ) {\n            result+=parseJSONTextAttrs ( jsonTxtObj );\n        }\n        else\n            if(jsonTxtObj!=null) {\n                if(config.escapeMode)\n                    result+=escapeXmlChars(jsonTxtObj);\n                else\n                    result+=jsonTxtObj;\n            }\n\n        return result;\n    }\n\n    function getJsonPropertyPath(jsonObjPath, jsonPropName) {\n        if (jsonObjPath===\"\") {\n            return jsonPropName;\n        }\n        else\n            return jsonObjPath+\".\"+jsonPropName;\n    }\n\n    function parseJSONArray ( jsonArrRoot, jsonArrObj, attrList, jsonObjPath ) {\n        var result = \"\";\n        if(jsonArrRoot.length == 0) {\n            result+=startTag(jsonArrRoot, jsonArrObj, attrList, true);\n        }\n        else {\n            for(var arIdx = 0; arIdx < jsonArrRoot.length; arIdx++) {\n                result+=startTag(jsonArrRoot[arIdx], jsonArrObj, parseJSONAttributes(jsonArrRoot[arIdx]), false);\n                result+=parseJSONObject(jsonArrRoot[arIdx], getJsonPropertyPath(jsonObjPath,jsonArrObj));\n                result+=endTag(jsonArrRoot[arIdx],jsonArrObj);\n            }\n        }\n        return result;\n    }\n\n    function parseJSONObject ( jsonObj, jsonObjPath ) {\n        var result = \"\";\n\n        var elementsCnt = jsonXmlElemCount ( jsonObj );\n\n        if(elementsCnt > 0) {\n            for( var it in jsonObj ) {\n\n                if(jsonXmlSpecialElem ( jsonObj, it) || (jsonObjPath!=\"\" && !checkJsonObjPropertiesFilter(jsonObj, it, getJsonPropertyPath(jsonObjPath,it))) )\n                    continue;\n\n                var subObj = jsonObj[it];\n\n                var attrList = parseJSONAttributes( subObj )\n\n                if(subObj == null || subObj == undefined) {\n                    result+=startTag(subObj, it, attrList, true);\n                }\n                else\n                if(subObj instanceof Object) {\n\n                    if(subObj instanceof Array) {\n                        result+=parseJSONArray( subObj, it, attrList, jsonObjPath );\n                    }\n                    else if(subObj instanceof Date) {\n                        result+=startTag(subObj, it, attrList, false);\n                        result+=subObj.toISOString();\n                        result+=endTag(subObj,it);\n                    }\n                    else {\n                        var subObjElementsCnt = jsonXmlElemCount ( subObj );\n                        if(subObjElementsCnt > 0 || subObj.__text!=null || subObj.__cdata!=null) {\n                            result+=startTag(subObj, it, attrList, false);\n                            result+=parseJSONObject(subObj, getJsonPropertyPath(jsonObjPath,it));\n                            result+=endTag(subObj,it);\n                        }\n                        else {\n                            result+=startTag(subObj, it, attrList, true);\n                        }\n                    }\n                }\n                else {\n                    result+=startTag(subObj, it, attrList, false);\n                    result+=parseJSONTextObject(subObj);\n                    result+=endTag(subObj,it);\n                }\n            }\n        }\n        result+=parseJSONTextObject(jsonObj);\n\n        return result;\n    }\n\n    this.parseXmlString = function(xmlDocStr) {\n        var isIEParser = window.ActiveXObject || \"ActiveXObject\" in window;\n        if (xmlDocStr === undefined) {\n            return null;\n        }\n        var xmlDoc;\n        if (window.DOMParser) {\n            var parser=new window.DOMParser();\n            var parsererrorNS = null;\n            try {\n                xmlDoc = parser.parseFromString( xmlDocStr, \"text/xml\" );\n                if(xmlDoc.getElementsByTagNameNS(\"*\", \"parsererror\").length > 0) {\n                    xmlDoc = null;\n                }\n            }\n            catch(err) {\n                xmlDoc = null;\n            }\n        }\n        else {\n            // IE :(\n            if(xmlDocStr.indexOf(\"<?\")==0) {\n                xmlDocStr = xmlDocStr.substr( xmlDocStr.indexOf(\"?>\") + 2 );\n            }\n            xmlDoc=new ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async=\"false\";\n            xmlDoc.loadXML(xmlDocStr);\n        }\n        return xmlDoc;\n    };\n\n    this.asArray = function(prop) {\n        if (prop === undefined || prop == null)\n            return [];\n        else\n        if(prop instanceof Array)\n            return prop;\n        else\n            return [prop];\n    };\n\n    this.toXmlDateTime = function(dt) {\n        if(dt instanceof Date)\n            return dt.toISOString();\n        else\n        if(typeof(dt) === 'number' )\n            return new Date(dt).toISOString();\n        else\n            return null;\n    };\n\n    this.asDateTime = function(prop) {\n        if(typeof(prop) == \"string\") {\n            return fromXmlDateTime(prop);\n        }\n        else\n            return prop;\n    };\n\n    this.xml2json = function (xmlDoc) {\n        return parseDOMChildren ( xmlDoc );\n    };\n\n    this.xml_str2json = function (xmlDocStr) {\n        var xmlDoc = this.parseXmlString(xmlDocStr);\n        if(xmlDoc!=null)\n            return this.xml2json(xmlDoc);\n        else\n            return null;\n    };\n\n    this.json2xml_str = function (jsonObj) {\n        return parseJSONObject ( jsonObj, \"\" );\n    };\n\n    this.json2xml = function (jsonObj) {\n        var xmlDocStr = this.json2xml_str (jsonObj);\n        return this.parseXmlString(xmlDocStr);\n    };\n\n    this.getVersion = function () {\n        return VERSION;\n    };\n}\n\nexport default X2JS;\n"]}